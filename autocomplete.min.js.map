{
  "version": 3,
  "sources": ["autocomplete.js"],
  "sourcesContent": ["/**\n * Bootstrap 5 autocomplete\n */\n\n// #region config\n\n/**\n * @callback RenderCallback\n * @param {Object} item\n * @param {String} label\n * @param {Autocomplete} inst\n * @returns {string}\n */\n\n/**\n * @callback ItemCallback\n * @param {Object} item\n * @param {Autocomplete} inst\n * @returns {void}\n */\n\n/**\n * @callback ServerCallback\n * @param {Response} response\n * @param {Autocomplete} inst\n * @returns {Promise}\n */\n\n/**\n * @typedef Config\n * @property {Boolean} showAllSuggestions Show all suggestions even if they don't match\n * @property {Number} suggestionsThreshold Number of chars required to show suggestions\n * @property {Number} maximumItems Maximum number of items to display\n * @property {Boolean} autoselectFirst Always select the first item\n * @property {Boolean} updateOnSelect Update input value on selection (doesn't play nice with autoselectFirst)\n * @property {Boolean} highlightTyped Highlight matched part of the label\n * @property {Boolean} fullWidth Match the width on the input field\n * @property {Boolean} fixed Use fixed positioning (solve overflow issues)\n * @property {Boolean} fuzzy Fuzzy search\n * @property {Array} activeClasses By default: [\"bg-primary\", \"text-white\"]\n * @property {String} labelField Key for the label\n * @property {String} valueField Key for the value\n * @property {Array} searchFields Key for the search\n * @property {String} queryParam Key for the query parameter for server\n * @property {Array|Object} items An array of label/value objects or an object with key/values\n * @property {Function} source A function that provides the list of items\n * @property {Boolean} hiddenInput Create an hidden input which stores the valueField\n * @property {String} hiddenValue Populate the initial hidden value. Mostly useful with liveServer.\n * @property {String} datalist The id of the source datalist\n * @property {String} server Endpoint for data provider\n * @property {String} serverMethod HTTP request method for data provider, default is GET\n * @property {String|Object} serverParams Parameters to pass along to the server. You can specify a \"related\" key with the id of a related field.\n * @property {String} serverDataKey By default: data\n * @property {Object} fetchOptions Any other fetch options (https://developer.mozilla.org/en-US/docs/Web/API/fetch#syntax)\n * @property {Boolean} liveServer Should the endpoint be called each time on input\n * @property {Boolean} noCache Prevent caching by appending a timestamp\n * @property {Number} debounceTime Debounce time for live server\n * @property {String} notFoundMessage Display a no suggestions found message. Leave empty to disable\n * @property {RenderCallback} onRenderItem Callback function that returns the label\n * @property {ItemCallback} onSelectItem Callback function to call on selection\n * @property {ServerCallback} onServerResponse Callback function to process server response. Must return a Promise\n * @property {ItemCallback} onChange Callback function to call on change-event. Returns currently selected item if any\n */\n\n/**\n * @type {Config}\n */\nconst DEFAULTS = {\n  showAllSuggestions: false,\n  suggestionsThreshold: 1,\n  maximumItems: 0,\n  autoselectFirst: true,\n  updateOnSelect: false,\n  highlightTyped: false,\n  fullWidth: false,\n  fixed: false,\n  fuzzy: false,\n  activeClasses: [\"bg-primary\", \"text-white\"],\n  labelField: \"label\",\n  valueField: \"value\",\n  searchFields: [\"label\"],\n  queryParam: \"query\",\n  items: [],\n  source: null,\n  hiddenInput: false,\n  hiddenValue: \"\",\n  datalist: \"\",\n  server: \"\",\n  serverMethod: \"GET\",\n  serverParams: {},\n  serverDataKey: \"data\",\n  fetchOptions: {},\n  liveServer: false,\n  noCache: true,\n  debounceTime: 300,\n  notFoundMessage: \"\",\n  onRenderItem: (item, label, inst) => {\n    return label;\n  },\n  onSelectItem: (item, inst) => {},\n  onServerResponse: (response, inst) => {\n    return response.json();\n  },\n  onChange: (item, inst) => {},\n};\n\n// #endregion\n\n// #region constants\n\nconst LOADING_CLASS = \"is-loading\";\nconst ACTIVE_CLASS = \"is-active\";\nconst SHOW_CLASS = \"show\";\nconst NEXT = \"next\";\nconst PREV = \"prev\";\n\nconst INSTANCE_MAP = new WeakMap();\nlet counter = 0;\nlet activeCounter = 0;\n\n// #endregion\n\n// #region functions\n\n/**\n * @param {Function} func\n * @param {number} timeout\n * @returns {Function}\n */\nfunction debounce(func, timeout = 300) {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      //@ts-ignore\n      func.apply(this, args);\n    }, timeout);\n  };\n}\n\n/**\n * @param {String} str\n * @returns {String}\n */\nfunction removeDiacritics(str) {\n  return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n}\n\n/**\n * @param {String|Number} str\n * @returns {String}\n */\nfunction normalize(str) {\n  if (!str) {\n    return \"\";\n  }\n  return removeDiacritics(str.toString()).toLowerCase();\n}\n\n/**\n * A simple fuzzy match algorithm that checks if chars are matched\n * in order in the target string\n *\n * @param {String} str\n * @param {String} lookup\n * @returns {Boolean}\n */\nfunction fuzzyMatch(str, lookup) {\n  if (str.indexOf(lookup) >= 0) {\n    return true;\n  }\n  let pos = 0;\n  for (let i = 0; i < lookup.length; i++) {\n    const c = lookup[i];\n    if (c == \" \") continue;\n    pos = str.indexOf(c, pos) + 1;\n    if (pos <= 0) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * @param {HTMLElement} el\n * @param {HTMLElement} newEl\n * @returns {HTMLElement}\n */\nfunction insertAfter(el, newEl) {\n  return el.parentNode.insertBefore(newEl, el.nextSibling);\n}\n\n/**\n * @param {string} html\n * @returns {string}\n */\nfunction decodeHtml(html) {\n  var txt = document.createElement(\"textarea\");\n  txt.innerHTML = html;\n  return txt.value;\n}\n\n/**\n * @param {HTMLElement} el\n * @param {Object} attrs\n */\nfunction attrs(el, attrs) {\n  for (const [k, v] of Object.entries(attrs)) {\n    el.setAttribute(k, v);\n  }\n}\n\n// #endregion\n\nclass Autocomplete {\n  /**\n   * @param {HTMLInputElement} el\n   * @param {Config|Object} config\n   */\n  constructor(el, config = {}) {\n    if (!(el instanceof HTMLElement)) {\n      console.error(\"Invalid element\", el);\n      return;\n    }\n    INSTANCE_MAP.set(el, this);\n    counter++;\n    activeCounter++;\n    this._searchInput = el;\n\n    this._configure(config);\n\n    // Private vars\n    this._preventInput = false;\n    this._keyboardNavigation = false;\n    this._searchFunc = debounce(() => {\n      this._loadFromServer(true);\n    }, this._config.debounceTime);\n\n    // Create html\n    this._configureSearchInput();\n    this._configureDropElement();\n\n    if (this._config.fixed) {\n      document.addEventListener(\"scroll\", this, true);\n      window.addEventListener(\"resize\", this);\n    }\n\n    // Rebind handleEvent to make sure the scope will not change\n    this.handleEvent = (ev) => {\n      this._handleEvent(ev);\n    };\n\n    // Add listeners (remove then on dispose()). See handleEvent.\n    this._searchInput.addEventListener(\"focus\", this);\n    this._searchInput.addEventListener(\"change\", this);\n    this._searchInput.addEventListener(\"blur\", this);\n    this._searchInput.addEventListener(\"input\", this);\n    this._searchInput.addEventListener(\"keydown\", this);\n    this._dropElement.addEventListener(\"mousemove\", this);\n\n    this._fetchData();\n  }\n\n  // #region Core\n\n  /**\n   * Attach to all elements matched by the selector\n   * @param {string} selector\n   * @param {Config|Object} config\n   */\n  static init(selector = \"input.autocomplete\", config = {}) {\n    /**\n     * @type {NodeListOf<HTMLInputElement>}\n     */\n    const nodes = document.querySelectorAll(selector);\n    nodes.forEach((el) => {\n      this.getOrCreateInstance(el, config);\n    });\n  }\n\n  /**\n   * @param {HTMLInputElement} el\n   */\n  static getInstance(el) {\n    return INSTANCE_MAP.has(el) ? INSTANCE_MAP.get(el) : null;\n  }\n\n  /**\n   * @param {HTMLInputElement} el\n   * @param {Object} config\n   */\n  static getOrCreateInstance(el, config = {}) {\n    return this.getInstance(el) || new this(el, config);\n  }\n\n  dispose() {\n    activeCounter--;\n\n    this._searchInput.removeEventListener(\"focus\", this);\n    this._searchInput.removeEventListener(\"change\", this);\n    this._searchInput.removeEventListener(\"blur\", this);\n    this._searchInput.removeEventListener(\"input\", this);\n    this._searchInput.removeEventListener(\"keydown\", this);\n    this._dropElement.removeEventListener(\"mousemove\", this);\n\n    // only remove if there are no more active elements\n    if (this._config.fixed && activeCounter <= 0) {\n      document.removeEventListener(\"scroll\", this, true);\n      window.removeEventListener(\"resize\", this);\n    }\n\n    this._dropElement.parentElement.removeChild(this._dropElement);\n\n    INSTANCE_MAP.delete(this._searchInput);\n  }\n\n  /**\n   * event-polyfill compat / handleEvent is expected on class\n   * @link https://github.com/lifaon74/events-polyfill/issues/10\n   * @param {Event} event\n   */\n  handleEvent(event) {\n    this._handleEvent(event);\n  }\n\n  /**\n   * @link https://gist.github.com/WebReflection/ec9f6687842aa385477c4afca625bbf4#handling-events\n   * @param {Event} event\n   */\n  _handleEvent(event) {\n    // debounce scroll and resize\n    const debounced = [\"scroll\", \"resize\"];\n    if (debounced.includes(event.type)) {\n      if (this._timer) window.cancelAnimationFrame(this._timer);\n      this._timer = window.requestAnimationFrame(() => {\n        this[`on${event.type}`](event);\n      });\n    } else {\n      this[`on${event.type}`](event);\n    }\n  }\n\n  /**\n   * @param {Config|Object} config\n   */\n  _configure(config = {}) {\n    this._config = Object.assign({}, DEFAULTS);\n\n    // Handle options, using arguments first and data attr as override\n    const o = { ...config, ...this._searchInput.dataset };\n\n    // Allow 1/0, true/false as strings\n    const parseBool = (value) => [\"true\", \"false\", \"1\", \"0\", true, false].includes(value) && !!JSON.parse(value);\n\n    // Typecast provided options based on defaults types\n    for (const [key, defaultValue] of Object.entries(DEFAULTS)) {\n      // Check for undefined keys\n      if (o[key] === void 0) {\n        continue;\n      }\n      const value = o[key];\n      switch (typeof defaultValue) {\n        case \"number\":\n          this._config[key] = parseInt(value);\n          break;\n        case \"boolean\":\n          this._config[key] = parseBool(value);\n          break;\n        case \"string\":\n          this._config[key] = value.toString();\n          break;\n        case \"object\":\n          // Arrays have a type object in js\n          if (Array.isArray(defaultValue)) {\n            if (typeof value === \"string\") {\n              const separator = value.includes(\"|\") ? \"|\" : \",\";\n              this._config[key] = value.split(separator);\n            } else {\n              this._config[key] = value;\n            }\n          } else {\n            this._config[key] = typeof value === \"string\" ? JSON.parse(value) : value;\n          }\n          break;\n        case \"function\":\n          this._config[key] = typeof value === \"string\" ? window[value] : value;\n          break;\n        default:\n          this._config[key] = value;\n          break;\n      }\n    }\n  }\n\n  // #endregion\n\n  // #region Html\n\n  _configureSearchInput() {\n    this._searchInput.autocomplete = \"field-\" + Date.now(); // off is ignored\n    this._searchInput.spellcheck = false;\n    // note: firefox doesn't support the properties so we use attributes\n    // @link https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-autocomplete\n    // @link https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-expanded\n    // use the aria-expanded state on the element with role combobox to communicate that the list is displayed.\n    attrs(this._searchInput, {\n      \"aria-auto-complete\": \"list\",\n      \"aria-has-popup\": \"menu\",\n      \"aria-expanded\": \"false\",\n      role: \"combobox\",\n    });\n    // Hidden input?\n    this._hiddenInput = null;\n    if (this._config.hiddenInput) {\n      this._hiddenInput = document.createElement(\"input\");\n      this._hiddenInput.type = \"hidden\";\n      this._hiddenInput.value = this._config.hiddenValue;\n      this._hiddenInput.name = this._searchInput.name;\n      this._searchInput.name = \"_\" + this._searchInput.name;\n      insertAfter(this._searchInput, this._hiddenInput);\n    }\n  }\n\n  _configureDropElement() {\n    this._dropElement = document.createElement(\"ul\");\n    this._dropElement.id = \"ac-menu-\" + counter;\n    this._dropElement.setAttribute(\"role\", \"menu\");\n    this._dropElement.classList.add(...[\"dropdown-menu\", \"autocomplete-menu\", \"p-0\"]);\n    this._dropElement.style.maxHeight = \"280px\";\n    if (!this._config.fullWidth) {\n      this._dropElement.style.maxWidth = \"360px\";\n    }\n    if (this._config.fixed) {\n      this._dropElement.style.position = \"fixed\";\n    }\n    this._dropElement.style.overflowY = \"auto\";\n    // Prevent scrolling the menu from scrolling the page\n    // @link https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior\n    this._dropElement.style.overscrollBehavior = \"contain\";\n    this._dropElement.style.textAlign = \"unset\"; // otherwise RTL is not good\n\n    insertAfter(this._searchInput, this._dropElement);\n    // include aria-controls with the value of the id of the suggested list of values.\n    this._searchInput.setAttribute(\"aria-controls\", this._dropElement.id);\n  }\n\n  // #endregion\n\n  // #region Events\n\n  oninput(e) {\n    if (this._preventInput) {\n      return;\n    }\n    // Input has changed, clear value\n    if (this._hiddenInput) {\n      this._hiddenInput.value = null;\n    }\n    this.showOrSearch();\n  }\n\n  onchange(e) {\n    const search = this._searchInput.value;\n    const item = Object.values(this._items).find((item) => item.label === search);\n    this._config.onChange(item, this);\n  }\n\n  onblur(e) {\n    this.hideSuggestions();\n  }\n\n  onfocus(e) {\n    this.showOrSearch();\n  }\n\n  /**\n   * keypress doesn't send arrow keys, so we use keydown\n   * @param {KeyboardEvent} e\n   */\n  onkeydown(e) {\n    const key = e.keyCode || e.key;\n    switch (key) {\n      case 13:\n      case \"Enter\":\n        if (this.isDropdownVisible()) {\n          e.preventDefault();\n          const selection = this.getSelection();\n          if (selection) {\n            selection.click();\n          }\n        }\n        break;\n      case 38:\n      case \"ArrowUp\":\n        e.preventDefault();\n        this._keyboardNavigation = true;\n        this._moveSelection(PREV);\n        break;\n      case 40:\n      case \"ArrowDown\":\n        e.preventDefault();\n        this._keyboardNavigation = true;\n        if (this.isDropdownVisible()) {\n          this._moveSelection(NEXT);\n        } else {\n          // show menu regardless of input length\n          this.showOrSearch(false);\n        }\n        break;\n      case 27:\n      case \"Escape\":\n        if (this.isDropdownVisible()) {\n          this._searchInput.focus();\n          this.hideSuggestions();\n        }\n        break;\n    }\n  }\n\n  onmousemove(e) {\n    // Moving the mouse means no longer using keyboard\n    this._keyboardNavigation = false;\n  }\n\n  onscroll(e) {\n    this._positionMenu();\n  }\n\n  onresize(e) {\n    this._positionMenu();\n  }\n\n  // #endregion\n\n  // #region Api\n\n  /**\n   * @param {String} k\n   * @returns {Config}\n   */\n  getConfig(k = null) {\n    if (k !== null) {\n      return this._config[k];\n    }\n    return this._config;\n  }\n\n  /**\n   * @param {String} k\n   * @param {*} v\n   */\n  setConfig(k, v) {\n    this._config[k] = v;\n  }\n\n  setData(src) {\n    this._items = {};\n    this._addItems(src);\n  }\n\n  enable() {\n    this._searchInput.setAttribute(\"disabled\", \"\");\n  }\n\n  disable() {\n    this._searchInput.removeAttribute(\"disabled\");\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isDisabled() {\n    return this._searchInput.hasAttribute(\"disabled\") || this._searchInput.disabled || this._searchInput.hasAttribute(\"readonly\");\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isDropdownVisible() {\n    return this._dropElement.classList.contains(SHOW_CLASS);\n  }\n\n  // #endregion\n\n  // #region Selection management\n\n  /**\n   * @returns {HTMLElement}\n   */\n  getSelection() {\n    return this._dropElement.querySelector(\"a.\" + ACTIVE_CLASS);\n  }\n\n  removeSelection() {\n    const selection = this.getSelection();\n    if (selection) {\n      selection.classList.remove(...this._activeClasses());\n    }\n  }\n\n  /**\n   * @returns {Array}\n   */\n  _activeClasses() {\n    return [...this._config.activeClasses, ...[ACTIVE_CLASS]];\n  }\n\n  /**\n   * @param {HTMLElement} li\n   * @returns {Boolean}\n   */\n  _isItemEnabled(li) {\n    if (li.style.display === \"none\") {\n      return false;\n    }\n    const fc = li.firstElementChild;\n    return fc.tagName === \"A\" && !fc.classList.contains(\"disabled\");\n  }\n\n  /**\n   * @param {String} dir\n   * @param {*|HTMLElement} sel\n   * @returns {HTMLElement}\n   */\n  _moveSelection(dir = NEXT, sel = null) {\n    const active = this.getSelection();\n\n    // select first li\n    if (!active) {\n      // no active selection, cannot go back\n      if (dir === PREV) {\n        return sel;\n      }\n      // find first enabled item\n      if (!sel) {\n        sel = this._dropElement.firstChild;\n        while (sel && !this._isItemEnabled(sel)) {\n          sel = sel[\"nextSibling\"];\n        }\n      }\n    } else {\n      const sibling = dir === NEXT ? \"nextSibling\" : \"previousSibling\";\n\n      // Iterate over enabled li\n      sel = active.parentNode;\n      do {\n        sel = sel[sibling];\n      } while (sel && !this._isItemEnabled(sel));\n\n      // We have a new selection\n      if (sel) {\n        // Change classes\n        active.classList.remove(...this._activeClasses());\n\n        // Scroll if necessary\n        if (dir === PREV) {\n          // Don't use scrollIntoView as it scrolls the whole window\n          sel.parentNode.scrollTop = sel.offsetTop - sel.parentNode.offsetTop;\n        } else {\n          // This is the equivalent of scrollIntoView(false) but only for parent node\n          if (sel.offsetTop > sel.parentNode.offsetHeight - sel.offsetHeight) {\n            sel.parentNode.scrollTop += sel.offsetHeight;\n          }\n        }\n      } else if (active) {\n        sel = active.parentElement;\n      }\n    }\n\n    if (sel) {\n      const a = sel.querySelector(\"a\");\n      a.classList.add(...this._activeClasses());\n      this._searchInput.setAttribute(\"aria-activedescendant\", a.id);\n      if (this._config.updateOnSelect) {\n        this._searchInput.value = a.dataset.label;\n      }\n    } else {\n      this._searchInput.setAttribute(\"aria-activedescendant\", \"\");\n    }\n    return sel;\n  }\n\n  // #endregion\n\n  // #region Implementation\n\n  /**\n   * Do we have enough input to show suggestions ?\n   * @returns {Boolean}\n   */\n  _shouldShow() {\n    if (this.isDisabled()) {\n      return false;\n    }\n    return this._searchInput.value.length >= this._config.suggestionsThreshold;\n  }\n\n  /**\n   * Show suggestions or load them\n   * @param {Boolean} check\n   */\n  showOrSearch(check = true) {\n    if (check && !this._shouldShow()) {\n      this.hideSuggestions();\n      return;\n    }\n    if (this._config.liveServer) {\n      this._searchFunc();\n    } else if (this._config.source) {\n      this._config.source(this._searchInput.value, (items) => {\n        this.setData(items);\n        this._showSuggestions();\n      });\n    } else {\n      this._showSuggestions();\n    }\n  }\n\n  /**\n   * @param {String} name\n   * @returns {HTMLElement}\n   */\n  _createGroup(name) {\n    const newChild = document.createElement(\"li\");\n    newChild.setAttribute(\"role\", \"presentation\");\n    const newChildSpan = document.createElement(\"span\");\n    newChild.append(newChildSpan);\n    newChildSpan.classList.add(...[\"dropdown-header\", \"text-truncate\"]);\n    newChildSpan.innerHTML = name;\n    return newChild;\n  }\n\n  /**\n   * @param {String} lookup\n   * @param {Object} item\n   * @returns {HTMLElement}\n   */\n  _createItem(lookup, item) {\n    let label = item.label;\n\n    if (this._config.highlightTyped) {\n      const idx = normalize(label).indexOf(lookup);\n      label =\n        label.substring(0, idx) +\n        `<mark>${label.substring(idx, idx + lookup.length)}</mark>` +\n        label.substring(idx + lookup.length, label.length);\n    }\n\n    label = this._config.onRenderItem(item, label, this);\n\n    const newChild = document.createElement(\"li\");\n    newChild.setAttribute(\"role\", \"presentation\");\n    const newChildLink = document.createElement(\"a\");\n    newChild.append(newChildLink);\n    newChildLink.id = this._dropElement.id + \"-\" + this._dropElement.children.length;\n    newChildLink.classList.add(...[\"dropdown-item\", \"text-truncate\"]);\n    newChildLink.setAttribute(\"data-value\", item.value);\n    newChildLink.setAttribute(\"data-label\", item.label);\n    // Behave like a datalist (tab doesn't allow item selection)\n    // @link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist\n    newChildLink.setAttribute(\"tabindex\", \"-1\");\n    newChildLink.setAttribute(\"role\", \"menuitem\");\n    newChildLink.setAttribute(\"href\", \"#\");\n    newChildLink.innerHTML = label;\n    if (item.data) {\n      for (const [key, value] of Object.entries(item.data)) {\n        newChildLink.dataset[key] = value;\n      }\n    }\n\n    // Hover sets active item\n    newChildLink.addEventListener(\"mouseenter\", (event) => {\n      // Don't trigger enter if using arrows\n      if (this._keyboardNavigation) {\n        return;\n      }\n      this.removeSelection();\n      newChild.querySelector(\"a\").classList.add(...this._activeClasses());\n    });\n    // Prevent searchInput losing focus and close the menu\n    newChildLink.addEventListener(\"mousedown\", (event) => {\n      event.preventDefault();\n    });\n    // Apply value\n    newChildLink.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n\n      // Prevent input otherwise it might trigger autocomplete due to value change\n      this._preventInput = true;\n      this._searchInput.value = decodeHtml(item.label);\n      // Populate value in hidden input\n      if (this._hiddenInput) {\n        this._hiddenInput.value = item.value;\n      }\n      this._config.onSelectItem(item, this);\n      this.hideSuggestions();\n      this._preventInput = false;\n    });\n\n    return newChild;\n  }\n\n  /**\n   * Show drop menu with suggestions\n   */\n  _showSuggestions() {\n    // It's not focused anymore\n    if (document.activeElement != this._searchInput) {\n      return;\n    }\n    const lookup = normalize(this._searchInput.value);\n    this._dropElement.innerHTML = \"\";\n\n    const keys = Object.keys(this._items);\n    let count = 0;\n    let firstItem = null;\n\n    const groups = [];\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const entry = this._items[key];\n\n      // Check search length since we can trigger dropdown with arrow\n      const showAllSuggestions = this._config.showAllSuggestions || lookup.length === 0;\n      // Do we find a matching string or do we display immediately ?\n      let isMatched = lookup.length == 0 && this._config.suggestionsThreshold === 0;\n      if (!showAllSuggestions && lookup.length > 0) {\n        // match on any field\n        this._config.searchFields.forEach((sf) => {\n          const text = normalize(entry[sf]);\n          const found = this._config.fuzzy ? fuzzyMatch(text, lookup) : text.indexOf(lookup) >= 0;\n          if (found) {\n            isMatched = true;\n          }\n        });\n      }\n      const selectFirst = isMatched || lookup.length === 0;\n      if (showAllSuggestions || isMatched) {\n        count++;\n\n        // Group\n        if (entry.group && !groups.includes(entry.group)) {\n          const newItem = this._createGroup(entry.group);\n          this._dropElement.appendChild(newItem);\n          groups.push(entry.group);\n        }\n\n        const newItem = this._createItem(lookup, entry);\n        // Only select as first item if its matching or no lookup\n        if (!firstItem && selectFirst) {\n          firstItem = newItem;\n        }\n        this._dropElement.appendChild(newItem);\n        if (this._config.maximumItems > 0 && count >= this._config.maximumItems) {\n          break;\n        }\n      }\n    }\n\n    if (firstItem && this._config.autoselectFirst) {\n      this.removeSelection();\n      this._moveSelection(NEXT, firstItem);\n    }\n\n    if (count === 0) {\n      if (this._config.notFoundMessage) {\n        const newChild = document.createElement(\"li\");\n        newChild.setAttribute(\"role\", \"presentation\");\n        newChild.innerHTML = `<span class=\"dropdown-item\">${this._config.notFoundMessage}</span>`;\n        this._dropElement.appendChild(newChild);\n        this._showDropdown();\n      } else {\n        // Remove dropdown if not found\n        this.hideSuggestions();\n      }\n    } else {\n      // Or show it if necessary\n      this._showDropdown();\n    }\n  }\n\n  /**\n   * Show and position dropdown\n   */\n  _showDropdown() {\n    this._dropElement.classList.add(SHOW_CLASS);\n    attrs(this._searchInput, {\n      \"aria-expanded\": \"true\",\n    });\n    this._positionMenu();\n  }\n\n  /**\n   * Show or hide suggestions\n   * @param {Boolean} check\n   */\n  toggleSuggestions(check = true) {\n    if (this._dropElement.classList.contains(SHOW_CLASS)) {\n      this.hideSuggestions();\n    } else {\n      this.showOrSearch(check);\n    }\n  }\n\n  /**\n   * Hide the dropdown menu\n   */\n  hideSuggestions() {\n    this._dropElement.classList.remove(SHOW_CLASS);\n    attrs(this._searchInput, {\n      \"aria-expanded\": \"false\",\n    });\n    this.removeSelection();\n  }\n\n  /**\n   * @returns {HTMLInputElement}\n   */\n  getInput() {\n    return this._searchInput;\n  }\n\n  /**\n   * @returns {HTMLUListElement}\n   */\n  getDropMenu() {\n    return this._dropElement;\n  }\n\n  /**\n   * Position the dropdown menu\n   */\n  _positionMenu() {\n    const styles = window.getComputedStyle(this._searchInput);\n    const bounds = this._searchInput.getBoundingClientRect();\n    const isRTL = styles.direction === \"rtl\";\n\n    // Don't position left if not fixed since it may not work in all situations\n    // due to offsetParent margin or in tables\n    let left = null;\n    let top = null;\n\n    if (this._config.fixed) {\n      left = bounds.x;\n      top = bounds.y + bounds.height;\n\n      // Align end\n      if (isRTL && !this._config.fullWidth) {\n        left -= this._dropElement.offsetWidth - bounds.width;\n      }\n    }\n\n    // Reset any height overflow adjustement\n    this._dropElement.style.transform = \"unset\";\n\n    // Use full holder width\n    if (this._config.fullWidth) {\n      this._dropElement.style.width = this._searchInput.offsetWidth + \"px\";\n    }\n\n    // Position element\n    if (left !== null) {\n      this._dropElement.style.left = left + \"px\";\n    }\n    if (top !== null) {\n      this._dropElement.style.top = top + \"px\";\n    }\n\n    // Overflow height\n    const dropBounds = this._dropElement.getBoundingClientRect();\n    const h = window.innerHeight;\n\n    // We display above input if it overflows\n    if (dropBounds.y + dropBounds.height > h) {\n      this._dropElement.style.transform = \"translateY(calc(-100% - \" + this._searchInput.offsetHeight + \"px))\";\n    }\n  }\n\n  _fetchData() {\n    this._items = {};\n\n    // From an array of items or an object\n    this._addItems(this._config.items);\n\n    // From a datalist\n    const dl = this._config.datalist;\n    if (dl) {\n      const datalist = document.querySelector(`#${dl}`);\n      if (datalist) {\n        const items = Array.from(datalist.children).map((o) => {\n          const value = o.getAttribute(\"value\") ?? o.innerHTML.toLowerCase();\n          const label = o.innerHTML;\n\n          return {\n            value,\n            label,\n          };\n        });\n        this._addItems(items);\n      } else {\n        console.error(`Datalist not found ${dl}`);\n      }\n    }\n    this._setHiddenVal();\n\n    // From an external source\n    if (this._config.server && !this._config.liveServer) {\n      this._loadFromServer();\n    }\n  }\n\n  _setHiddenVal() {\n    if (this._config.hiddenInput && !this._config.hiddenValue) {\n      for (const [value, entry] of Object.entries(this._items)) {\n        if (entry.label == this._searchInput.value) {\n          this._hiddenInput.value = value;\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Array|Object} src An array of items or a value:label object\n   */\n  _addItems(src) {\n    const keys = Object.keys(src);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const entry = src[key];\n\n      if (entry.group && entry.items) {\n        entry.items.forEach((e) => (e.group = entry.group));\n        this._addItems(entry.items);\n        continue;\n      }\n\n      const label = typeof entry === \"string\" ? entry : entry.label;\n      const item = typeof entry !== \"object\" ? {} : entry;\n\n      // Normalize entry\n      item.label = entry[this._config.labelField] ?? label;\n      item.value = entry[this._config.valueField] ?? key;\n\n      // Make sure we have a label\n      if (item.label) {\n        this._items[item.value] = item;\n      }\n    }\n  }\n\n  /**\n   * @param {boolean} show\n   */\n  _loadFromServer(show = false) {\n    if (this._abortController) {\n      this._abortController.abort();\n    }\n    this._abortController = new AbortController();\n\n    // Read data params dynamically as well\n    let extraParams = this._searchInput.dataset.serverParams || {};\n    if (typeof extraParams == \"string\") {\n      extraParams = JSON.parse(extraParams);\n    }\n    const params = Object.assign({}, this._config.serverParams, extraParams);\n    // Pass current value\n    params[this._config.queryParam] = this._searchInput.value;\n    // Prevent caching\n    if (this._config.noCache) {\n      params.t = Date.now();\n    }\n    // We have a related field\n    if (params.related) {\n      /**\n       * @type {HTMLInputElement}\n       */\n      //@ts-ignore\n      const input = document.getElementById(params.related);\n      if (input) {\n        params.related = input.value;\n        const inputName = input.getAttribute(\"name\");\n        if (inputName) {\n          params[inputName] = input.value;\n        }\n      }\n    }\n\n    const urlParams = new URLSearchParams(params);\n    let url = this._config.server;\n    let fetchOptions = Object.assign(this._config.fetchOptions, {\n      method: this._config.serverMethod || \"GET\",\n      signal: this._abortController.signal,\n    });\n\n    if (fetchOptions.method === \"POST\") {\n      fetchOptions.body = urlParams;\n    } else {\n      url += \"?\" + urlParams.toString();\n    }\n\n    this._searchInput.classList.add(LOADING_CLASS);\n    fetch(url, fetchOptions)\n      .then((r) => this._config.onServerResponse(r, this))\n      .then((suggestions) => {\n        const data = suggestions[this._config.serverDataKey] || suggestions;\n        this.setData(data);\n        this._setHiddenVal();\n        this._abortController = null;\n        if (show) {\n          this._showSuggestions();\n        }\n      })\n      .catch((e) => {\n        if (e.name === \"AbortError\") {\n          return;\n        }\n        console.error(e);\n      })\n      .finally((e) => {\n        this._searchInput.classList.remove(LOADING_CLASS);\n      });\n  }\n\n  // #endregion\n}\n\nexport default Autocomplete;\n"],
  "mappings": "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",
  "names": ["DEFAULTS", "item", "label", "inst", "response", "LOADING_CLASS", "ACTIVE_CLASS", "SHOW_CLASS", "NEXT", "PREV", "INSTANCE_MAP", "counter", "activeCounter", "debounce", "func", "timeout", "timer", "args", "removeDiacritics", "str", "normalize", "fuzzyMatch", "lookup", "pos", "i", "c", "insertAfter", "el", "newEl", "decodeHtml", "html", "txt", "attrs", "k", "v", "Autocomplete", "config", "_searchInput", "_configure", "_preventInput", "_keyboardNavigation", "_searchFunc", "_loadFromServer", "_config", "_configureSearchInput", "_configureDropElement", "ev", "_handleEvent", "_dropElement", "_fetchData", "selector", "event", "_timer", "o", "parseBool", "value", "key", "defaultValue", "separator", "_hiddenInput", "e", "search", "_items", "selection", "_moveSelection", "_positionMenu", "src", "_addItems", "_activeClasses", "_isItemEnabled", "li", "fc", "dir", "sel", "active", "sibling", "a", "_shouldShow", "check", "items", "_showSuggestions", "_createGroup", "name", "newChild", "newChildSpan", "_createItem", "idx", "newChildLink", "keys", "count", "firstItem", "groups", "entry", "showAllSuggestions", "isMatched", "sf", "text", "selectFirst", "newItem", "_showDropdown", "styles", "bounds", "isRTL", "left", "top", "dropBounds", "h", "dl", "datalist", "_setHiddenVal", "show", "_abortController", "extraParams", "params", "input", "inputName", "urlParams", "url", "fetchOptions", "r", "suggestions", "data", "autocomplete_default"]
}
